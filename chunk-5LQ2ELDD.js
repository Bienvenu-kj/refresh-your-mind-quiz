import{aa as c,c as n,d as r,e as s,f as u,h as a,i as h,r as i}from"./chunk-7JDHDX52.js";var l=class o{constructor(e){this.router=e}expetedScore=i(100);questions_done=[];questions_done_obs=new r;id=i(0);material_icon=new s(!1);score_=i(0);score=new s(this.score_());vies_=i(5);vies=new s(this.vies_());questions=[{id:0,question:"",choices:[""],answer:""}];question_behavior_sub=new s(this.questions[0]);question_observ=this.question_behavior_sub.asObservable();getQuestions=()=>n(this,null,function*(){try{let t=yield(yield fetch("questions.json")).json();this.questions=t,this.question_behavior_sub.next(this.questions[0])}catch(e){console.error("error lors de recuperation de donn\xE9es : ",e)}});sendQuestion(){if(this.id.update(e=>e+1),this.id()<this.questions.length&&this.vies_()>=1)return this.question_behavior_sub.next(this.questions[this.id()]);this.questions_done_obs=u(this.questions_done),this.router.navigate(["quiz-final-result"])}upDateLife(){this.vies_.update(e=>e-1),this.vies.next(this.vies_())}upDateScore(e){e?(this.score_.update(t=>t+10),this.score.next(this.score_())):(this.score_()<=0?this.score_.set(0):this.score_.update(t=>t-10),this.score.next(this.score_()))}putQuestionDone(e,t,_){this.questions_done.push({question:e,userAnswer:t,rightAnswer:_})}reset(){this.questions_done=[],this.question_behavior_sub.next(this.questions[0]),this.id.set(0),this.score_.set(0),this.vies_.set(5),this.score.next(this.score_()),this.vies.next(this.vies_())}attendrePendant(e){return new Promise(t=>{setTimeout(t,e)})}ngOnInit(){fetch("https://fonts.googleapis.com/icon?family=Material+Icons").then(e=>{throw e.ok&&(this.material_icon.next(!0),console.log("Tout va bien, les icons sont prets",e)),new Error(`Erreur lors de la requette ${e.status}`)}).catch(e=>{console.log(e),this.material_icon.next(!1)})}static \u0275fac=function(t){return new(t||o)(h(c))};static \u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})};export{l as a};
