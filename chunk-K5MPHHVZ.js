import{M as c,a as n,b as r,c as i,d as u,e as h,f as a,l as t}from"./chunk-PIXXCZSO.js";var _=class o{constructor(e){this.router=e}expetedScore=t(100);questions_done=[];questions_done_obs=new r;id=t(0);score_=t(0);score=new i(this.score_());vies_=t(5);vies=new i(this.vies_());questions=[{id:0,question:"",choices:[""],answer:""}];question_behavior_sub=new i(this.questions[0]);question_observ=this.question_behavior_sub.asObservable();getQuestions=()=>n(this,null,function*(){try{let s=yield(yield fetch("questions.json")).json();this.questions=s,this.question_behavior_sub.next(this.questions[0])}catch(e){console.error("error lors de recuperation de donn\xE9es : ",e)}});sendQuestion(){if(this.id.update(e=>e+1),this.id()<this.questions.length&&this.vies_()>=1)return this.question_behavior_sub.next(this.questions[this.id()]);this.questions_done_obs=u(this.questions_done),this.router.navigate(["quiz-final-result"])}upDateLife(){this.vies_.update(e=>e-1),this.vies.next(this.vies_())}upDateScore(e){e?(this.score_.update(s=>s+10),this.score.next(this.score_())):(this.score_()<=0?this.score_.set(0):this.score_.update(s=>s-10),this.score.next(this.score_()))}putQuestionDone(e,s,d){this.questions_done.push({question:e,userAnswer:s,rightAnswer:d})}reset(){this.questions_done=[],this.question_behavior_sub.next(this.questions[0]),this.id.set(0),this.score_.set(0),this.vies_.set(5),this.score.next(this.score_()),this.vies.next(this.vies_())}attendrePendant(e){return new Promise(s=>{setTimeout(s,e)})}static \u0275fac=function(s){return new(s||o)(a(c))};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{_ as a};
